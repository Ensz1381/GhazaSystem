@page "/test"
@rendermode InteractiveServer

<PageTitle>تست</PageTitle>

<MudStack Spacing="3" Style="padding: 20px;">

    <MudText Typo="Typo.h4">تست کامپوننت‌های MudBlazor</MudText>

    <MudDivider />

    <!-- تست 1: دکمه ساده -->
    <MudButton Variant="Variant.Filled"
               Color="Color.Primary"
               OnClick="() => counter++">
        کلیک کنید: @counter
    </MudButton>

    <!-- تست 2: Dialog -->
    <MudButton Variant="Variant.Filled"
               Color="Color.Success"
               OnClick="OpenDialog">
        باز کردن Dialog
    </MudButton>

    <!-- تست 3: Snackbar -->
    <MudButton Variant="Variant.Filled"
               Color="Color.Warning"
               OnClick="ShowSnackbar">
        نمایش Snackbar
    </MudButton>

    <!-- تست 4: Select -->
    <MudSelect T="string"
               @bind-Value="selectedValue"
               Label="انتخاب کنید"
               Variant="Variant.Outlined"
               Style="max-width: 300px;">
        <MudSelectItem Value="@("option1")">گزینه 1</MudSelectItem>
        <MudSelectItem Value="@("option2")">گزینه 2</MudSelectItem>
        <MudSelectItem Value="@("option3")">گزینه 3</MudSelectItem>
    </MudSelect>

    <MudText>انتخاب شده: <strong>@selectedValue</strong></MudText>

    <!-- تست 5: DatePicker -->
    <MudDatePicker Label="تاریخ"
                   @bind-Date="selectedDate"
                   Variant="Variant.Outlined"
                   Style="max-width: 300px;" />

    <MudText>تاریخ انتخاب شده: <strong>@selectedDate</strong></MudText>

</MudStack>

@code {
    [Inject] private IDialogService DialogService { get; set; } = default!;
    [Inject] private ISnackbar Snackbar { get; set; } = default!;

    private int counter = 0;
    private string selectedValue = "";
    private DateTime? selectedDate;

    private async Task OpenDialog()
    {
        var result = await DialogService.ShowMessageBox(
            "تست Dialog",
            "این یک Dialog تستی است. آیا کار می‌کند؟",
            yesText: "بله",
            cancelText: "خیر"
        );

        if (result == true)
        {
            Snackbar.Add("بله را انتخاب کردید", Severity.Success);
        }
        else
        {
            Snackbar.Add("خیر را انتخاب کردید", Severity.Info);
        }
    }

    private void ShowSnackbar()
    {
        Snackbar.Add("این یک Snackbar تستی است!", Severity.Success);
    }
}